function e(e){return e&&e.__esModule?e.default:e}var t,a,n,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},c={};n="object"==typeof i&&i&&i.Object===Object&&i;var s="object"==typeof self&&self&&self.Object===Object&&self;a=(n||s||Function("return this")()).Symbol;var l={};l=function(e,t){for(var a=-1,n=null==e?0:e.length,i=Array(n);++a<n;)i[a]=t(e[a],a,e);return i};var o={},d=Array.isArray;o=d;var u={},m={},g={},f=Object.prototype,h=f.hasOwnProperty,v=f.toString,p=a?a.toStringTag:void 0;g=function(e){var t=h.call(e,p),a=e[p];try{e[p]=void 0;var n=!0}catch(e){}var i=v.call(e);return n&&(t?e[p]=a:delete e[p]),i};var b={},w=Object.prototype.toString;b=function(e){return w.call(e)};var L=a?a.toStringTag:void 0;m=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":L&&L in Object(e)?g(e):b(e)};var S={};S=function(e){return null!=e&&"object"==typeof e};u=function(e){return"symbol"==typeof e||S(e)&&"[object Symbol]"==m(e)};var y=a?a.prototype:void 0,_=y?y.toString:void 0;c=function e(t){if("string"==typeof t)return t;if(o(t))return l(t,e)+"";if(u(t))return _?_.call(t):"";var a=t+"";return"0"==a&&1/t==-Infinity?"-0":a},r=function(e){return null==e?"":c(e)};var E=0;t=function(e){var t=++E;return r(e)+t};var O=e=>document.createElement(e);var P=(e,t)=>e.append(t);!async function(){const a={cards:[],categories:[],uiState:{thumbnails:[],currentView:"cards"},view:{currentPage:1,rowsOnPage:100},filter:null};await fetch("http://contest.elecard.ru/frontend_data/catalog.json").then((e=>e.json())).then((e=>{a.cards=e})).catch((e=>{console.warn(e),alert("Error receiving data from the server")}));const n=document.querySelector(".cards-wrapper"),i=document.querySelector(".treeline"),r=document.querySelector("#switcher"),c=document.querySelectorAll("input[data-type]"),s=document.querySelector(".pagination");function l(){const e=JSON.parse(localStorage.getItem("lastUi"));a.uiState.thumbnails=e}function o(){a.uiState.thumbnails=a.cards.map((a=>({...a,id:e(t)(),isVisible:!0})));const n=[];a.cards.forEach((({category:e})=>{n.includes(e)||n.push(e)})),a.categories=n.sort()}function d(e,t,i){const r=t*(i-1),c=r+t;e.slice(r,c).filter((({isVisible:e})=>e)).map((e=>{const{image:t,category:i,id:r}=e,c=O("li"),s=O("div"),l=O("button"),o=O("img"),u=`http://contest.elecard.ru/frontend_data/${t}`;switch(c.classList.add("card"),o.classList.add("card-img"),o.src=u,s.classList.add("card-info"),l.classList.add("card-btn"),s.textContent="Yep, just some simple content ecapsulated in this card.",l.textContent="X",l.setAttribute("id",r),c.addEventListener("click",(e=>{var t;t=e.target.id,a.uiState.thumbnails.forEach((e=>{const a=e;t===e.id&&(a.isVisible=!1)})),n.innerHTML=null,d(a.uiState.thumbnails,a.view.rowsOnPage,a.view.currentPage)})),i){case"animals":o.alt="image with animals";break;case"business":o.alt="image with business attr-s";break;case"vehicle":o.alt="image with vehicle";break;case"food":o.alt="image with food";break;case"health":o.alt="image with health attr-s";break;case"places":o.alt="image with some place";break;case"science":o.alt="image with science attr-s";break;case"winter":o.alt="winter landscape";break;default:o.alt=""}return P(c,o),P(c,s),P(c,l),P(n,c),null})),localStorage.setItem("lastUi",JSON.stringify(a.uiState.thumbnails))}function u(){localStorage.removeItem("lastUi"),n.innerHTML=null,o(),d(a.uiState.thumbnails,a.view.rowsOnPage,a.view.currentPage),document.location.reload()}function m(e){const t=document.createElement("li");return t.classList.add("pagination__item"),t.textContent=e,e===a.view.currentPage&&t.classList.add("pagination__item--active"),t.addEventListener("click",(()=>{a.view.currentPage=e,n.innerHTML=null,d(a.uiState.thumbnails,a.view.rowsOnPage,a.view.currentPage);document.querySelector("li.pagination__item--active").classList.remove("pagination__item--active"),t.classList.add("pagination__item--active")})),t}function g(){!function(e){const t=document.createElement("li");t.textContent="Categories",t.classList.add("tree__title"),t.classList.add("handleLi");const n=document.createElement("ul");n.classList.add("tree__list"),i.prepend(t),t.append(n),e.forEach((e=>{const t=document.createElement("li");t.classList.add("handleLi"),t.textContent=e,t.append(function(e){const t=document.createElement("ul");return t.classList.add("tree__coll"),a.cards.filter((({category:t})=>t===e)).forEach((({image:e})=>{const a=document.createElement("li");a.classList.add("card__item"),a.style.backgroundImage=`url(http://contest.elecard.ru/frontend_data/${e})`,a.addEventListener("click",(e=>{e.target.classList.contains("maximized")?e.target.classList.contains("maximized")&&e.target.classList.remove("maximized"):e.target.classList.add("maximized")})),t.prepend(a)})),t}(e)),n.append(t)}))}(a.categories),function(){const e=document.querySelector(".treeline");for(const t of e.querySelectorAll(".handleLi")){const e=document.createElement("span");e.classList.add("show"),t.prepend(e),e.append(e.nextSibling)}e.addEventListener("click",(e=>{if("SPAN"!==e.target.tagName)return null;const t=e.target.parentNode.querySelector("ul");return t.hidden=!t.hidden,t.hidden?(e.target.classList.add("hide"),e.target.classList.remove("show")):(e.target.classList.add("show"),e.target.classList.remove("hide")),null}))}()}function f(e){"cards"===e?(n.innerHTML=null,i.innerHTML=null,d(a.uiState.thumbnails,a.view.rowsOnPage,a.view.currentPage),document.querySelector(".refresh-btn").addEventListener("click",u),l(),c.forEach((e=>e.addEventListener("change",(e=>{const t=e.target.value;var i;a.filter=t,a.uiState.thumbnails=a.uiState.thumbnails.sort((i=a.filter,(e,t)=>e[i]>t[i]?1:-1)),n.innerHTML=null,d(a.uiState.thumbnails,a.view.rowsOnPage,a.view.currentPage)})))),function(){const e=a.uiState.thumbnails,t=a.view.rowsOnPage,n=Math.ceil(e.length/t),i=document.createElement("ul");i.classList.add("pagination__list");for(let e=0;e<n;e+=1){const t=m(e+1);i.append(t)}s.append(i)}()):"tree"===e&&(n.innerHTML=null,i.innerHTML=null,l(),g())}o(),r.addEventListener("change",(e=>{const t=e.target.value;document.querySelectorAll(".switcher__item").forEach((e=>{e.classList.remove("active")})),e.target.parentNode.parentNode.classList.add("active"),a.uiState.currentView=t,s.innerHTML=null,f(a.uiState.currentView)})),f(a.uiState.currentView)}();
//# sourceMappingURL=index.634f3fc7.js.map
